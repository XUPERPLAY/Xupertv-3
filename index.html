<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>XUPERLIST DEPORTES</title>
<style>
  :root {
    --primary-color: #0072CE;
    --dark-color: #0A1A2B;
    --darker-color: #061220;
    --light-color: #E6F0F7;
    --gray-color: #7D8B99;
    --accent-color: #00AEEF;
    --red-color: #E50914;
    --green-color: #00C853;
    --sport-color: #FF6B00;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', sans-serif;
  }

  body {
    background-color: var(--dark-color);
    color: var(--light-color);
    overflow-x: hidden;
    line-height: 1.5;
    min-height: 100vh;
  }

  .main-container {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  header {
    background: var(--darker-color);
    padding: 15px 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 100;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }

  .logo {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .logo-icon {
    width: 60px;
    height: auto;
  }

  .logo-text {
    font-size: 1.8rem;
    font-weight: bold;
    background: linear-gradient(to right, var(--sport-color), var(--accent-color));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }

  .user-menu {
    display: flex;
    align-items: center;
    gap: 15px;
  }

  .user-btn {
    background: none;
    border: none;
    color: var(--gray-color);
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 5px;
  }

  .user-btn:hover {
    color: var(--light-color);
  }

  .sticky-controls {
    position: sticky;
    top: 70px;
    background: var(--dark-color);
    z-index: 90;
    padding: 10px 20px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  }

  .content {
    flex: 1;
    margin-top: 70px;
    padding: 0;
  }

  .search-container {
    margin-bottom: 10px;
    position: relative;
  }

  .search-input {
    width: 100%;
    padding: 12px 15px 12px 45px;
    border-radius: 6px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    background: rgba(255, 255, 255, 0.1);
    color: white;
    font-size: 1rem;
    transition: all 0.3s ease;
  }

  .search-input:focus {
    outline: none;
    border-color: var(--sport-color);
    background: rgba(255, 255, 255, 0.2);
  }

  .search-icon {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--gray-color);
  }

  .channels-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 20px;
    padding: 20px;
  }

  .channel-card {
    background: var(--darker-color);
    border-radius: 8px;
    overflow: hidden;
    transition: all 0.3s ease;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 15px;
    text-align: center;
    position: relative;
  }

  .channel-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
  }

  .channel-card.sport {
    border: 2px solid var(--sport-color);
  }

  .channel-card.sport::before {
    content: "DEPORTE";
    position: absolute;
    top: 5px;
    right: 5px;
    background: var(--sport-color);
    color: white;
    font-size: 0.6rem;
    font-weight: bold;
    padding: 2px 5px;
    border-radius: 3px;
  }

  .channel-card.adults {
    border: 2px solid var(--red-color);
  }

  .channel-card.adults::before {
    content: "ADULTOS";
    position: absolute;
    top: 5px;
    right: 5px;
    background: var(--red-color);
    color: white;
    font-size: 0.6rem;
    font-weight: bold;
    padding: 2px 5px;
    border-radius: 3px;
  }

  .channel-logo {
    width: 80px;
    height: 80px;
    object-fit: contain;
    margin-bottom: 15px;
  }

  .channel-name {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 5px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .channel-category {
    font-size: 0.9rem;
    color: var(--gray-color);
  }

  .card-actions {
    position: absolute;
    top: 10px;
    left: 10px;
    display: flex;
    gap: 5px;
  }

  .card-btn {
    background: rgba(0, 0, 0, 0.5);
    border: none;
    color: white;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.3s ease;
  }

  .card-btn:hover {
    background: rgba(0, 0, 0, 0.7);
  }

  .card-btn.fav {
    color: var(--red-color);
  }

  .player-container {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--darker-color);
    z-index: 1000;
    flex-direction: column;
  }

  .player-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    background: rgba(0, 0, 0, 0.5);
  }

  .player-title {
    font-size: 1.2rem;
    font-weight: bold;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 70%;
  }

  .player-close {
    background: none;
    border: none;
    color: var(--gray-color);
    font-size: 1.5rem;
    cursor: pointer;
    flex-shrink: 0;
  }

  video {
    width: 100%;
    height: calc(100vh - 120px);
    background: black;
  }

  .channel-info {
    display: none;
    align-items: center;
    gap: 15px;
    padding: 10px;
    background: rgba(0, 0, 0, 0.3);
  }

  .channel-logo-small {
    width: 40px;
    height: 40px;
    object-fit: contain;
  }

  .channel-details {
    flex: 1;
  }

  .channel-title {
    font-size: 1rem;
    font-weight: bold;
    margin-bottom: 3px;
  }

  .channel-meta {
    display: flex;
    gap: 10px;
    color: var(--gray-color);
    font-size: 0.8rem;
  }

  .channel-quality {
    background: var(--green-color);
    color: var(--darker-color);
    padding: 2px 6px;
    border-radius: 4px;
    font-weight: bold;
    font-size: 0.7rem;
  }

  .player-controls {
    display: flex;
    gap: 10px;
    padding: 10px 20px;
    background: rgba(0, 0, 0, 0.5);
    flex-wrap: wrap;
  }

  .player-controls button {
    padding: 8px 15px;
    background: var(--sport-color);
    color: white;
    border: none;
    border-radius: 4px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 5px;
    transition: all 0.3s ease;
    font-size: 0.9rem;
  }

  .player-controls button:hover {
    background: #e55a00;
  }

  .modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    z-index: 2000;
    align-items: center;
    justify-content: center;
  }

  .modal-content {
    background: var(--darker-color);
    border-radius: 8px;
    width: 90%;
    max-width: 400px;
    padding: 20px;
  }

  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
  }

  .modal-title {
    font-size: 1.2rem;
    font-weight: bold;
    color: var(--light-color);
  }

  .modal-close {
    background: none;
    border: none;
    color: var(--gray-color);
    font-size: 1.5rem;
    cursor: pointer;
  }

  .quality-options {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .quality-option {
    padding: 12px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.3s;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .quality-option:hover {
    background: rgba(255, 255, 255, 0.2);
  }

  .quality-name {
    font-weight: 600;
  }

  .quality-resolution {
    color: var(--gray-color);
    font-size: 0.8rem;
  }

  .loading {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 200px;
  }

  .spinner {
    width: 40px;
    height: 40px;
    border: 4px solid rgba(255, 107, 0, 0.2);
    border-top-color: var(--sport-color);
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    to { transform: rotate(360deg); }
  }

  .error-message {
    text-align: center;
    padding: 40px;
    color: var(--red-color);
  }

  .retry-btn {
    margin-top: 20px;
    padding: 10px 20px;
    background: var(--sport-color);
    color: white;
    border: none;
    border-radius: 4px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .retry-btn:hover {
    background: #e55a00;
  }

  @media (max-width: 768px) {
    .logo-text {
      font-size: 1.2rem;
    }

    .user-btn span {
      display: none;
    }

    .channels-grid {
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 15px;
    }

    .channel-logo {
      width: 70px;
      height: 70px;
    }

    .channel-name {
      font-size: 0.9rem;
    }

    .channel-category {
      font-size: 0.8rem;
    }
  }

  @media (max-width: 480px) {
    .logo-text {
      font-size: 1rem;
      display: block;
      max-width: 100px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .channels-grid {
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 12px;
    }

    .channel-card {
      padding: 12px;
    }

    .channel-logo {
      width: 60px;
      height: 60px;
    }

    .player-controls button {
      padding: 6px 10px;
      font-size: 0.8rem;
    }
}
</style>
</head>
<body>
<div class="main-container" id="app-content">
  <header>
    <div class="logo">
      <img src="https://i.postimg.cc/RV81y11K/IMG-20250805-220533-390.jpg" alt="Logo de Xuperlist Deportes" class="logo-icon">
      <div class="logo-text">XUPERLIST DEPORTES</div>
    </div>
    
    <div class="user-menu">
      <button class="user-btn" onclick="app.refreshChannels()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" fill="currentColor"/>
        </svg>
        <span>Actualizar</span>
      </button>
    </div>
  </header>

  <div class="sticky-controls">
    <div class="search-container">
      <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="currentColor"/>
        </svg>
      <input type="text" class="search-input" placeholder="Buscar canales..." id="search-input">
    </div>
  </div>

  <div class="content" id="content">
    <div class="channels-grid" id="channels-grid">
      <div class="loading">
        <div class="spinner"></div>
      </div>
    </div>
  </div>

  <div class="player-container" id="player-container">
    <div class="player-header">
      <div class="player-title" id="player-title">Viéndo</div>
      <button class="player-close" onclick="app.player.hide()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z" fill="currentColor"/>
        </svg>
      </button>
    </div>
    
    <video controls id="player"></video>
    
    <div class="channel-info" id="channel-info">
      <img class="channel-logo-small" id="channel-logo" src="" alt="Logo del Canal">
      <div class="channel-details">
        <div class="channel-title" id="channel-name">Nombre del Canal</div>
        <div class="channel-meta">
          <span id="channel-category">Categoría</span>
          <span class="channel-quality" id="channel-quality">HD</span>
        </div>
      </div>
    </div>
    
    <div class="player-controls" id="player-controls">
      <button onclick="app.player.play()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M8 5V19L19 12L8 5Z" fill="currentColor"/>
        </svg>
        Reproducir
      </button>
      <button onclick="app.player.pause()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M6 19H10V5H6V19ZM14 5V19H18V5H14Z" fill="currentColor"/>
        </svg>
        Pausar
      </button>
      <button onclick="app.player.stop()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M6 6H18V18H6V6Z" fill="currentColor"/>
        </svg>
        Detener
      </button>
      <button onclick="app.player.changeQuality()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M7 6H5V18H7V6ZM19 6H9V18H19V6ZM17 10H15V14H17V10ZM13 8H11V16H13V8Z" fill="currentColor"/>
        </svg>
        Calidad
      </button>
    </div>
  </div>

  <div class="modal" id="quality-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Seleccione la calidad</h3>
        <button class="modal-close" onclick="app.closeQualityModal()">&times;</button>
      </div>
      <div class="quality-options" id="quality-options">
        </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
  const app = {
    config: {
      apiUrl: "/api/proxy",
      username: "es3291730888528001",
      password: "31c30c64ed8d",
      passwordAdults: "0000",
      liveBase: "/live"
    },
    
    state: {
      channels: [],
      favorites: JSON.parse(localStorage.getItem("favorites") || "[]"),
      searchTerm: "",
      isAdultsUnlocked: localStorage.getItem("adults-unlocked") === "true"
    },
    
    init: function() {
      document.getElementById("app-content").style.display = "flex";
      this.loadChannels();
    },
    
    refreshChannels: function() {
      this.loadChannels();
    },
    
    loadChannels: function() {
      this.showLoading();
      
      const token = `username=${this.config.username}&password=${this.config.password}`;
      const apiUrl = `${this.config.apiUrl}/player_api.php?${token}&action=get_live_streams`;
      
      console.log("Cargando canales de:", apiUrl);
      
      fetch(apiUrl)
        .then(response => {
          if (!response.ok) {
            throw new Error(`Error HTTP: ${response.status}`);
          }
          return response.json();
        })
        .then(data => {
          console.log("Respuesta de la API:", data);
          
          if (!data || !Array.isArray(data)) {
            throw new Error("Respuesta inválida de la API");
          }
          
          this.state.channels = data;
          
          if (this.state.channels.length === 0) {
            this.showError("No se encontraron canales. Es posible que la API esté vacía o que haya un problema con las credenciales.");
          } else {
            console.log("Total de canales encontrados:", this.state.channels.length);
          }
          
          this.renderChannels();
        })
        .catch(error => {
          console.error("Error al cargar canales:", error);
          this.showError(`Error al cargar canales: ${error.message}`);
        });
    },
    
    isAdultChannel: function(channel) {
      if (!channel.category_name && !channel.name) return false;
      const lowerCaseCategory = channel.category_name ? channel.category_name.toLowerCase() : '';
      const lowerCaseName = channel.name ? channel.name.toLowerCase() : '';

      return lowerCaseCategory.includes("adult") || 
             lowerCaseCategory.includes("xxx") || 
             lowerCaseName.includes("xxx") ||
             lowerCaseName.includes("adultos");
    },
    
    renderChannels: function() {
      let channelsToShow = this.state.channels.filter(channel => {
        const isAdult = this.isAdultChannel(channel);
        if (isAdult && !this.state.isAdultsUnlocked) {
          return false;
        }

        const name = channel.name || '';
        return name.toLowerCase().includes(this.state.searchTerm);
      });
      
      let channelsHTML = "";
      
      if (channelsToShow.length === 0) {
        channelsHTML = `
          <div style="text-align: center; padding: 40px; color: var(--gray-color);">
            ${this.state.searchTerm ? "Ningún canal encontrado para esta búsqueda." : "No hay canales disponibles en este momento."}
          </div>
        `;
      } else {
        channelsToShow.forEach(channel => {
          const isFavorite = this.state.favorites.some(fav => fav.stream_id === channel.stream_id);
          const isAdult = this.isAdultChannel(channel);
          const sportsKeywords = ['deporte', 'sport', 'fútbol', 'basketball', 'nba', 'ufc', 'formula', 'mma', 'fight'];
          const isSportChannel = (channel.name && channel.category_name) && (
            sportsKeywords.some(keyword => 
              channel.category_name.toLowerCase().includes(keyword) || channel.name.toLowerCase().includes(keyword)
            )
          );
          
          let cardClass = '';
          if (isSportChannel) cardClass = 'sport';
          if (isAdult) cardClass = 'adults';
          
          channelsHTML += `
            <div class="channel-card ${cardClass}" onclick="app.checkAdultsAndPlay(${JSON.stringify(channel).replace(/"/g, '&quot;')})">
              <div class="card-actions">
                <button class="card-btn fav ${isFavorite ? 'fav' : ''}" 
                        onclick="event.stopPropagation(); app.toggleFavorite(${JSON.stringify(channel).replace(/"/g, '&quot;')})">
                  ${isFavorite ? '♥' : '♡'}
                </button>
              </div>
              <img class="channel-logo" src="${channel.stream_icon || 'https://via.placeholder.com/80x80?text=TV'}" alt="${channel.name}">
              <div class="channel-name">${channel.name || 'Sin nombre'}</div>
              <div class="channel-category">${channel.category_name || 'Sin categoría'}</div>
            </div>
          `;
        });
      }
      
      document.getElementById("channels-grid").innerHTML = channelsHTML;
      
      const searchInput = document.getElementById('search-input');
      searchInput.value = this.state.searchTerm;
      searchInput.addEventListener('input', (e) => {
        this.state.searchTerm = e.target.value.toLowerCase();
        this.renderChannels();
      });
    },
    
    checkAdultsAndPlay: function(channel) {
      if (this.isAdultChannel(channel) && !this.state.isAdultsUnlocked) {
        const password = prompt("Este canal es para adultos. Por favor, introduzca la contraseña:");
        if (password === this.config.passwordAdults) {
          this.state.isAdultsUnlocked = true;
          localStorage.setItem("adults-unlocked", "true");
          this.renderChannels();
          this.showQualityModal(channel);
        } else {
          alert("Contraseña incorrecta.");
        }
      } else {
        this.showQualityModal(channel);
      }
    },
    
    toggleFavorite: function(channel) {
      const index = this.state.favorites.findIndex(fav => fav.stream_id === channel.stream_id);
      
      if (index >= 0) {
        this.state.favorites.splice(index, 1);
      } else {
        this.state.favorites.push(channel);
      }
      
      localStorage.setItem("favorites", JSON.stringify(this.state.favorites));
      this.renderChannels();
    },
    
    showLoading: function() {
      document.getElementById("channels-grid").innerHTML = `
        <div class="loading">
          <div class="spinner"></div>
        </div>
      `;
    },
    
    showError: function(message) {
      document.getElementById("channels-grid").innerHTML = `
        <div class="error-message">
          <p>${message}</p>
          <p style="margin-top: 10px; color: var(--gray-color);">Verifique sus credenciales y conexión a internet.</p>
          <button class="retry-btn" onclick="app.loadChannels()">
            Intentar de nuevo
          </button>
        </div>
      `;
    },
    
    showQualityModal: function(channel) {
      const qualities = [
        { name: 'HD', url: `${app.config.liveBase}/${app.config.username}/${app.config.password}/${channel.stream_id}.m3u8`, resolution: '1280x720' },
        { name: 'SD', url: `${app.config.liveBase}/${app.config.username}/${app.config.password}/${channel.stream_id}_sd.m3u8`, resolution: '854x480' },
        { name: 'FHD', url: `${app.config.liveBase}/${app.config.username}/${app.config.password}/${channel.stream_id}_fhd.m3u8`, resolution: '1920x1080' }
      ];
      
      let optionsHTML = '';
      qualities.forEach(q => {
        optionsHTML += `
          <div class="quality-option" onclick="app.player.playChannel('${q.url}', ${JSON.stringify(channel).replace(/"/g, '&quot;')}, ${JSON.stringify(q).replace(/"/g, '&quot;')})">
            <div>
              <div class="quality-name">${q.name}</div>
              <div class="quality-resolution">${q.resolution}</div>
            </div>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M8 5v14l11-7z" fill="currentColor"/>
            </svg>
          </div>
        `;
      });
      
      document.getElementById('quality-options').innerHTML = optionsHTML;
      document.getElementById('quality-modal').style.display = 'flex';
    },
    
    closeQualityModal: function() {
      document.getElementById('quality-modal').style.display = 'none';
    },
    
    player: {
      currentItem: null,
      currentQuality: null,
      hls: null,
      
      playChannel: function(url, channel, quality) {
        this.currentItem = channel;
        this.currentQuality = quality;
        
        document.getElementById('quality-modal').style.display = 'none';
        document.getElementById('player-container').style.display = 'flex';
        document.getElementById('channel-info').style.display = 'flex';
        document.getElementById('player-title').textContent = channel.name;
        document.getElementById('channel-name').textContent = channel.name;
        document.getElementById('channel-logo').src = channel.stream_icon || 'https://via.placeholder.com/80x80?text=TV';
        document.getElementById('channel-quality').textContent = quality.name;
        document.getElementById('channel-category').textContent = channel.category_name;

        const video = document.getElementById('player');
        
        if (Hls.isSupported()) {
          this.hls = new Hls();
          this.hls.loadSource(url);
          this.hls.attachMedia(video);
          this.hls.on(Hls.Events.MANIFEST_PARSED, () => {
            video.play();
          });
        } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
          video.src = url;
          video.addEventListener('loadedmetadata', () => {
            video.play();
          });
        } else {
          alert('Tu navegador no es compatible con el reproductor de video.');
        }
      },
      
      play: function() {
        const video = document.getElementById('player');
        if (video.paused) {
          video.play();
        }
      },
      
      pause: function() {
        const video = document.getElementById('player');
        if (!video.paused) {
          video.pause();
        }
      },
      
      stop: function() {
        const video = document.getElementById('player');
        video.pause();
        video.currentTime = 0;
        if (this.hls) {
          this.hls.destroy();
          this.hls = null;
        }
      },
      
      changeQuality: function() {
        if (this.currentItem) {
          app.showQualityModal(this.currentItem);
        }
      },
      
      hide: function() {
        this.stop();
        document.getElementById('player-container').style.display = 'none';
      }
    }
  };
  
  app.init();
</script>
</body>
</html>
